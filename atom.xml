<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>dlee çš„ Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://dlee-libo.github.io/"/>
  <updated>2025-06-26T08:08:59.628Z</updated>
  <id>http://dlee-libo.github.io/</id>
  
  <author>
    <name>dlee</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆè®²æ•…äº‹æ˜¯æœ€æœ‰æ•ˆçš„ä¿¡æ¯ä¼ é€’æ–¹å¼ï¼Ÿ</title>
    <link href="http://dlee-libo.github.io/2025/06/14/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AE%B2%E6%95%85%E4%BA%8B%E6%98%AF%E6%9C%80%E6%9C%89%E6%95%88%E7%9A%84%E4%BF%A1%E6%81%AF%E4%BC%A0%E9%80%92%E6%96%B9%E5%BC%8F%EF%BC%9F/"/>
    <id>http://dlee-libo.github.io/2025/06/14/ä¸ºä»€ä¹ˆè®²æ•…äº‹æ˜¯æœ€æœ‰æ•ˆçš„ä¿¡æ¯ä¼ é€’æ–¹å¼ï¼Ÿ/</id>
    <published>2025-06-14T06:45:25.000Z</published>
    <updated>2025-06-26T08:08:59.628Z</updated>
    
    <content type="html"><![CDATA[<p>äººç±»æœ€æ“…é•¿çš„ä¿¡æ¯ä¼ é€’æ–¹å¼ï¼Œä¹Ÿè®¸å°±æ˜¯â€œè®²æ•…äº‹â€ã€‚</p><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬å¦‚æ­¤æ“…é•¿å¬æ•…äº‹ã€è®²æ•…äº‹ï¼ŸèƒŒåå¾ˆå¯èƒ½ä¸æˆ‘ä»¬çš„è®°å¿†æœºåˆ¶æœ‰å…³ã€‚æœ‰ç ”ç©¶æŒ‡å‡ºï¼Œäººç±»çš„è®°å¿†æ›´å€¾å‘äºæŒ‰å™äº‹ç»“æ„æ¥ç»„ç»‡å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä»¿ä½›æœ‰ä¸€ä¸ªåå°ç¨‹åºï¼Œåœ¨æŒç»­åœ°å°†ç»å†è½¬åŒ–ä¸ºçº¿æ€§ã€è¿è´¯çš„â€œæ•…äº‹â€ï¼Œä¸²è”èµ·è¿‡å»çš„ç‰‡æ®µã€‚æˆ‘ä»¬æ‰€è°“çš„â€œæ–­ç‰‡â€ï¼Œæ¯”å¦‚é†‰é…’æ—¶çš„è®°å¿†ç¼ºå¤±ï¼Œä¹Ÿå¾ˆåƒæ˜¯å™äº‹ç»“æ„è¢«æ‰“æ–­çš„è¡¨ç°ã€‚</p><p>ä¹Ÿæ­£å› æ­¤ï¼Œäººç±»å¯¹äºä»¥æ•…äº‹å½¢å¼ä¼ è¾¾çš„ä¿¡æ¯ï¼Œå¾€å¾€æ›´å®¹æ˜“ç†è§£ã€è®°ä½ã€å…±æƒ…ã€‚ä»è¿™ä¸ªè§†è§’ï¼Œæˆ‘ä»¬ä¸å¦¨çœ‹çœ‹å„ç§è‰ºæœ¯åª’ä»‹æ˜¯å¦‚ä½•â€œè®²æ•…äº‹â€çš„ã€‚</p><hr><h2 id="å„ç§åª’ä»‹ä¸è®²æ•…äº‹çš„èƒ½åŠ›"><a href="#å„ç§åª’ä»‹ä¸è®²æ•…äº‹çš„èƒ½åŠ›" class="headerlink" title="å„ç§åª’ä»‹ä¸è®²æ•…äº‹çš„èƒ½åŠ›"></a>å„ç§åª’ä»‹ä¸è®²æ•…äº‹çš„èƒ½åŠ›</h2><h3 id="ğŸ¨-ç»˜ç”»ï¼šæƒ…ç»ªå¤§äºä¿¡æ¯"><a href="#ğŸ¨-ç»˜ç”»ï¼šæƒ…ç»ªå¤§äºä¿¡æ¯" class="headerlink" title="ğŸ¨ ç»˜ç”»ï¼šæƒ…ç»ªå¤§äºä¿¡æ¯"></a>ğŸ¨ ç»˜ç”»ï¼šæƒ…ç»ªå¤§äºä¿¡æ¯</h3><p>ç»˜ç”»å¯ä»¥æ‰¿è½½æ•…äº‹ï¼Œä½†å®ƒå¯¹èƒŒæ™¯çŸ¥è¯†çš„ä¾èµ–æå¤§ã€‚æœ‰äº›ä½œå“åªä¼ è¾¾æƒ…ç»ªï¼Œä¸è¯•å›¾è®²è¿°å…·ä½“äº‹ä»¶ã€‚æ¯ä¸ªè§‚ä¼—è§£è¯»ä¸åŒï¼šä½ çœ‹åˆ°çš„æ˜¯è¯—æ„ï¼Œä»–æ„Ÿå—åˆ°çš„æ˜¯å‹æŠ‘ã€‚è€Œä½œè€…è¦ä¼ è¾¾çš„ï¼Œè§‚ä¼—æœªå¿…èƒ½å‡†ç¡®æ•æ‰ã€‚</p><p>å®ƒçš„ä¼˜åŠ¿åœ¨äºæ¿€å‘æ„Ÿå—ï¼Œè€Œéä¼ é€’æ˜ç¡®çš„ä¿¡æ¯ã€‚</p><h3 id="ğŸ¶-éŸ³ä¹ï¼šæƒ…ç»ªæµåŠ¨çš„è¯­è¨€"><a href="#ğŸ¶-éŸ³ä¹ï¼šæƒ…ç»ªæµåŠ¨çš„è¯­è¨€" class="headerlink" title="ğŸ¶ éŸ³ä¹ï¼šæƒ…ç»ªæµåŠ¨çš„è¯­è¨€"></a>ğŸ¶ éŸ³ä¹ï¼šæƒ…ç»ªæµåŠ¨çš„è¯­è¨€</h3><p>éŸ³ä¹å°¤å…¶æ˜¯å™¨ä¹éƒ¨åˆ†ï¼Œä¹Ÿä¸ç»˜ç”»ç±»ä¼¼ï¼Œæ›´æ“…é•¿ä¼ è¾¾æƒ…ç»ªè€Œéå…·ä½“äº‹ä»¶ã€‚ä½†å®ƒåœ¨æƒ…ç»ªæ§åˆ¶ä¸Šçš„èƒ½åŠ›æ›´å¼ºï¼Œå¯ä»¥é€šè¿‡æ—‹å¾‹ã€èŠ‚å¥ç›´æ¥å½±å“å¬è€…çš„æƒ…ç»ªæ³¢åŠ¨ã€‚</p><p>å¦‚æœç»“åˆæ­Œè¯æˆ–è§†è§‰ï¼ˆå¦‚MVï¼‰ï¼Œè®²æ•…äº‹èƒ½åŠ›ä¼šæ›´å¼ºã€‚</p><h3 id="ğŸ“–-æ–‡å­¦ï¼šä¿¡æ¯å¯†åº¦çš„è·ƒè¿"><a href="#ğŸ“–-æ–‡å­¦ï¼šä¿¡æ¯å¯†åº¦çš„è·ƒè¿" class="headerlink" title="ğŸ“– æ–‡å­¦ï¼šä¿¡æ¯å¯†åº¦çš„è·ƒè¿"></a>ğŸ“– æ–‡å­¦ï¼šä¿¡æ¯å¯†åº¦çš„è·ƒè¿</h3><p>æ–‡å­—â€”â€”æ— è®ºæ˜¯ä¹¦å†™è¿˜æ˜¯å£è¿°â€”â€”å¤§å¤§å¢å¼ºäº†è®²æ•…äº‹çš„èƒ½åŠ›ã€‚å®ƒä¸ä»…èƒ½è¡¨è¾¾æƒ…èŠ‚ã€è§’è‰²ï¼Œè¿˜èƒ½ä¼ è¾¾æ€æƒ³ã€éšå–»ã€ç»“æ„æ€§é€»è¾‘ã€‚</p><p>å£è¿°å†ç»“åˆå£°éŸ³çš„å˜åŒ–ã€è¯­è°ƒã€èƒŒæ™¯éŸ³ä¹ï¼Œå°±æ›´å…·æ„ŸæŸ“åŠ›â€”â€”è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆå¹¿æ’­å‰§ã€æ’­å®¢å’Œè¯„ä¹¦æœ‰ä¸å°çš„å—ä¼—ã€‚</p><h3 id="ğŸ›-å»ºç­‘ï¼šç©ºé—´é‡Œçš„â€œé™æ€å™äº‹â€"><a href="#ğŸ›-å»ºç­‘ï¼šç©ºé—´é‡Œçš„â€œé™æ€å™äº‹â€" class="headerlink" title="ğŸ› å»ºç­‘ï¼šç©ºé—´é‡Œçš„â€œé™æ€å™äº‹â€"></a>ğŸ› å»ºç­‘ï¼šç©ºé—´é‡Œçš„â€œé™æ€å™äº‹â€</h3><p>è™½ç„¶ç•¥å»ä¸è°ˆï¼Œä½†å»ºç­‘ä½œä¸ºç©ºé—´åª’ä»‹ï¼Œä¹Ÿèƒ½é€šè¿‡è·¯å¾„ã€å…‰å½±ã€ç»“æ„æ¥â€œè®²æ•…äº‹â€â€”â€”åªæ˜¯å®ƒæ˜¯é™æ€çš„ã€éçº¿æ€§çš„ï¼Œä½†åœ¨å™äº‹æ€§ç©ºé—´è®¾è®¡ä¸­å´æ½œåŠ›å·¨å¤§ï¼ˆä¾‹å¦‚åšç‰©é¦†å±•é™ˆï¼‰ã€‚</p><h3 id="ğŸ¬-ç”µå½±ï¼šè®²æ•…äº‹çš„é›†å¤§æˆè€…"><a href="#ğŸ¬-ç”µå½±ï¼šè®²æ•…äº‹çš„é›†å¤§æˆè€…" class="headerlink" title="ğŸ¬ ç”µå½±ï¼šè®²æ•…äº‹çš„é›†å¤§æˆè€…"></a>ğŸ¬ ç”µå½±ï¼šè®²æ•…äº‹çš„é›†å¤§æˆè€…</h3><p>ç”µå½±æ•´åˆäº†å›¾åƒã€å£°éŸ³ã€èŠ‚å¥ã€è¯­è¨€ï¼Œæ˜¯ç°ä»£æœ€å¼ºçš„å™äº‹å·¥å…·ä¹‹ä¸€ã€‚é€šè¿‡è’™å¤ªå¥‡å‰ªè¾‘ï¼Œå®ƒè¿˜å¯ä»¥è°ƒåŠ¨è§‚ä¼—çš„è„‘è¡¥èƒ½åŠ›ï¼Œåœ¨è¡¨è¾¾ç°å®ä¸è™šæ„ä¹‹é—´çµæ´»ç©¿æ¢­ã€‚</p><p>å®ƒæ˜¯å¯¹äººç±»â€œè®²æ•…äº‹å¤©èµ‹â€çš„ç³»ç»Ÿå¼ºåŒ–ã€‚</p><hr><h2 id="ğŸ®-æ¸¸æˆï¼šæœ€å…·æ½œåŠ›ä¹Ÿæœ€éš¾æŒæ¡çš„æ•…äº‹å½¢å¼"><a href="#ğŸ®-æ¸¸æˆï¼šæœ€å…·æ½œåŠ›ä¹Ÿæœ€éš¾æŒæ¡çš„æ•…äº‹å½¢å¼" class="headerlink" title="ğŸ® æ¸¸æˆï¼šæœ€å…·æ½œåŠ›ä¹Ÿæœ€éš¾æŒæ¡çš„æ•…äº‹å½¢å¼"></a>ğŸ® æ¸¸æˆï¼šæœ€å…·æ½œåŠ›ä¹Ÿæœ€éš¾æŒæ¡çš„æ•…äº‹å½¢å¼</h2><p>ç†è®ºä¸Šï¼Œæ¸¸æˆæ˜¯ç”µå½±çš„è¶…é›†ã€‚å®ƒå¢åŠ äº†äº¤äº’æ€§ï¼Œè§‚ä¼—ä¸åªæ˜¯è¢«åŠ¨æ¥æ”¶ï¼Œè€Œæ˜¯å‚ä¸å…¶ä¸­ã€‚</p><p>ä½†è¿™ä¹Ÿå¸¦æ¥äº†æŒ‘æˆ˜â€”â€”äº’åŠ¨å¸¸å¸¸æ‰“æ–­å™äº‹çš„è¿ç»­æ€§ã€‚æ¯”å¦‚ä½ æ­£æ²‰æµ¸åœ¨ææ€–æ°›å›´é‡Œï¼Œçªç„¶æ¸¸æˆè¦æ±‚ä½ è§£ä¸ªæ‹¼å›¾ï¼›ä½ åœ¨äº«å—å‰§æƒ…ï¼Œä¸‹ä¸€ç§’å´è¿›å…¥äº†æ— æ„ä¹‰çš„æˆ˜æ–—ã€‚èŠ‚å¥è¢«æ‰“æ–­ã€æ³¨æ„åŠ›åˆ†æ•£ï¼Œæ˜¯è®¸å¤šæ¸¸æˆé¢ä¸´çš„éš¾é¢˜ã€‚</p><h3 id="è®²æ•…äº‹-vs-å¯ç©æ€§ï¼šé­‚ç±»æ¸¸æˆçš„ä¾‹å­"><a href="#è®²æ•…äº‹-vs-å¯ç©æ€§ï¼šé­‚ç±»æ¸¸æˆçš„ä¾‹å­" class="headerlink" title="è®²æ•…äº‹ vs å¯ç©æ€§ï¼šé­‚ç±»æ¸¸æˆçš„ä¾‹å­"></a>è®²æ•…äº‹ vs å¯ç©æ€§ï¼šé­‚ç±»æ¸¸æˆçš„ä¾‹å­</h3><p>â€œé­‚ç±»æ¸¸æˆâ€æä¾›äº†ä¸€ä¸ªæœ‰è¶£çš„è§£æ³•ã€‚å®ƒå¼±åŒ–äº†ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„çº¿æ€§å™äº‹ï¼Œè€Œæ˜¯é€šè¿‡ç‰‡æ®µç•™ç™½å’Œç¯å¢ƒç»†èŠ‚ï¼Œé¼“åŠ±ç©å®¶è‡ªå·±æ‹¼å‡ºæ•…äº‹ã€‚è€Œåœ¨æœºåˆ¶ä¸Šï¼Œå®ƒä¹Ÿåˆ»æ„<strong>çœç•¥äº†åœ°å›¾ã€ä»»åŠ¡å¼•å¯¼ç­‰å¼ºæŒ‡ç¤ºæ€§ UI å…ƒç´ </strong>ï¼Œè®©ç©å®¶å¿…é¡»é è‡ªå·±çš„è§‚å¯Ÿå’Œæ¢ç´¢å‰è¿›ã€‚</p><p>è¿™ç§è®¾è®¡ä¸ä»…å¢å¼ºäº†æ¢ç´¢æ„Ÿï¼Œä¹Ÿ<strong>æœ‰æ•ˆå‡å°‘äº†åˆ†å¿ƒå› ç´ </strong>ï¼šæ²¡æœ‰ç®­å¤´ã€æ²¡æœ‰ä»»åŠ¡æ¸…å•ã€æ²¡æœ‰åœ°å›¾ä¸Šçš„å°ç‚¹ç‚¹ï¼Œæ³¨æ„åŠ›è‡ªç„¶é›†ä¸­åœ¨æˆ˜æ–—å’Œç¯å¢ƒä¸­ã€‚ä½ æ‰€è·å¾—çš„ä¸€åˆ‡è¿›å±•éƒ½é è‡ªå·±æŒ£æ¥çš„ï¼Œè‡ªç„¶ä¹Ÿæ›´æŠ•å…¥ã€æ›´è®°å¾—ä½ã€‚</p><p>æœ€ç»ˆï¼Œä½ æ‹¼å‡ºçš„ä¸åªæ˜¯ä¸€ä¸ªæ¸¸æˆèƒŒæ™¯ï¼Œè€Œæ˜¯ä½ è‡ªå·±çš„æ•…äº‹ã€‚</p><p>ç›¸å¯¹åœ°ï¼Œä¹Ÿæœ‰å¼ºåŒ–ç³»ç»Ÿè®¾è®¡çš„æ¸¸æˆï¼Œæ¯”å¦‚ã€ŠCSã€‹è¿™ç±»ç«æŠ€æ¸¸æˆï¼Œå®Œå…¨å¼±åŒ–å‰§æƒ…ï¼Œé è§„åˆ™å¾ªç¯ç»ƒä¹ ã€æŒ‘æˆ˜ã€æˆå°±æ¥å¸å¼•äººã€‚</p><p>é­‚ç±»åˆ™å¤„åœ¨ä¸¤è€…ä¹‹é—´ï¼Œå®ç°äº†ä¸€ç§è‰¯å¥½çš„ balanceã€‚</p><hr><h2 id="ğŸ¤–-AI-Chatbotï¼šä¸€ç§æ–°å‹çš„äº¤äº’æ€§çŸ¥è¯†ä¼ é€’æ–¹å¼ï¼Ÿ"><a href="#ğŸ¤–-AI-Chatbotï¼šä¸€ç§æ–°å‹çš„äº¤äº’æ€§çŸ¥è¯†ä¼ é€’æ–¹å¼ï¼Ÿ" class="headerlink" title="ğŸ¤– AI Chatbotï¼šä¸€ç§æ–°å‹çš„äº¤äº’æ€§çŸ¥è¯†ä¼ é€’æ–¹å¼ï¼Ÿ"></a>ğŸ¤– AI Chatbotï¼šä¸€ç§æ–°å‹çš„äº¤äº’æ€§çŸ¥è¯†ä¼ é€’æ–¹å¼ï¼Ÿ</h2><p>æœ€è¿‘å…´èµ·çš„ AI Chatbotï¼Œæˆ–è®¸ä¸æ˜¯ä¸€ç§æ–°çš„è‰ºæœ¯å½¢å¼ï¼Œä½†åœ¨çŸ¥è¯†ä¼ é€’æ–¹å¼ä¸Šï¼Œå®ƒéå¸¸åƒæ¸¸æˆâ€”â€”å¼ºè°ƒâ€œäº¤äº’â€ã€‚</p><p>ä½ å¯ä»¥æå‡ºè‡ªå·±çš„é—®é¢˜ã€ç–‘æƒ‘ã€æ¯”å–»ï¼ŒChatbot ä¸ä»…èƒ½è§£ç­”ï¼Œè¿˜èƒ½ä¿®æ­£ä½ ç±»æ¯”çš„åå·®ã€æ‹“å±•ä½ çš„æ€è·¯ã€‚è¿™ç§æ–¹å¼ç›¸è¾ƒäºä¼ ç»Ÿçš„â€œæ…•è¯¾â€æˆ–è§†é¢‘è®²è§£ï¼ˆå“ªæ€•æœ‰å¼¹å¹•å’Œæµ‹éªŒï¼‰ï¼Œå¤§å¤§æå‡äº†ä¸»åŠ¨æ€§å’Œä¸ªæ€§åŒ–ã€‚</p><p>ä¸»åŠ¨å­¦ä¹ çš„æ–¹å¼ï¼Œå…¶å®ä¹Ÿå¾ˆåƒæˆ‘ä»¬å¼€å¤´è®²çš„ï¼šè¶Šæ¥è¿‘â€œä½ è‡ªå·±çš„æ•…äº‹â€ï¼Œè¶Šå®¹æ˜“è®°ä½ã€‚</p><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>äººç±»æœ€æ“…é•¿ä¹Ÿæœ€å–œæ¬¢çš„æ¥æ”¶ä¿¡æ¯æ–¹å¼ï¼Œæ˜¯æ•…äº‹ã€‚è€Œåª’ä»‹çš„è¿›æ­¥ï¼Œä¸æ–­ä¸°å¯Œæˆ‘ä»¬è®²æ•…äº‹çš„æ–¹å¼ã€‚</p><ul><li>ç”»ã€éŸ³è¡¨è¾¾æƒ…ç»ªï¼›</li><li>æ–‡ã€å½±è¡¨è¾¾æƒ…èŠ‚ï¼›</li><li>æ¸¸æˆå’ŒAIåˆ™å¸¦æ¥äº†äº’åŠ¨ä¸ä¸ªæ€§åŒ–çš„å™äº‹å¯èƒ½ã€‚</li></ul><p>æœ€ç»ˆï¼Œæˆ‘ä»¬è®°ä½çš„ï¼Œæ°¸è¿œæ˜¯æˆ‘ä»¬äº²èº«ç»å†çš„æ•…äº‹â€”â€”å“ªæ€•æ˜¯è™šæ‹Ÿä¸–ç•Œé‡Œå¤±è´¥äº†ä¸€ç™¾æ¬¡çš„é‚£ä¸ªè‡ªå·±ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;äººç±»æœ€æ“…é•¿çš„ä¿¡æ¯ä¼ é€’æ–¹å¼ï¼Œä¹Ÿè®¸å°±æ˜¯â€œè®²æ•…äº‹â€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬å¦‚æ­¤æ“…é•¿å¬æ•…äº‹ã€è®²æ•…äº‹ï¼ŸèƒŒåå¾ˆå¯èƒ½ä¸æˆ‘ä»¬çš„è®°å¿†æœºåˆ¶æœ‰å…³ã€‚æœ‰ç ”ç©¶æŒ‡å‡ºï¼Œäººç±»çš„è®°å¿†æ›´å€¾å‘äºæŒ‰å™äº‹ç»“æ„æ¥ç»„ç»‡å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä»¿ä½›æœ‰ä¸€ä¸ªåå°ç¨‹åºï¼Œåœ¨æŒç»­åœ°å°†ç»å†è½¬åŒ–ä¸ºçº¿æ€§ã€è¿è´¯çš„â€œæ•…äº‹â€ï¼Œä¸²è”èµ·è¿‡å»çš„ç‰‡æ®µã€‚
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Open Source, Hardware, and the Reshaping of the Software Industry: Growth, Consolidation, and Cultural Lag</title>
    <link href="http://dlee-libo.github.io/2025/06/13/Open-Source-Hardware-and-the-Reshaping-of-the-Software-Industry-Growth-Consolidation-and-Cultural-Lag/"/>
    <id>http://dlee-libo.github.io/2025/06/13/Open-Source-Hardware-and-the-Reshaping-of-the-Software-Industry-Growth-Consolidation-and-Cultural-Lag/</id>
    <published>2025-06-13T09:22:46.000Z</published>
    <updated>2025-06-13T09:23:20.562Z</updated>
    
    <content type="html"><![CDATA[<p>The software industry has undergone explosive growth over the past few decades, with two key forces behind its rapid transformation: the <strong>open source movement</strong> and the <strong>dramatic advancement in hardware</strong>. These forces have democratized access to tools and knowledge, fueled innovation, and reshaped global competitiveness â€” especially in countries like China. But these same forces have also introduced subtle challenges: labor displacement, cultural gaps in management, and increasing consolidation around dominant technologies.</p><h2 id="Open-Source-as-Information-Democracy"><a href="#Open-Source-as-Information-Democracy" class="headerlink" title="Open Source as Information Democracy"></a>Open Source as Information Democracy</h2><p>The open source movement is often seen as a triumph of collaboration, but at its core, itâ€™s a powerful engine of <strong>information transparency</strong> and <strong>knowledge dissemination</strong>. By making software source code publicly available, open source allowed developers anywhere in the world to study, learn from, and build upon cutting-edge technology.</p><p>This movement <strong>flattened global barriers</strong> to software innovation. In China, for example, access to open source projects enabled rapid catch-up with Western counterparts. Developers could immediately access high-quality code, best practices, and community-driven knowledge without needing access to elite universities or proprietary corporate systems.</p><p>Open source has created a shared foundation for software development that transcends borders. It has empowered individuals, startups, and even entire nations to build competitive products without reinventing the wheel. It is, in many ways, a form of <strong>global public infrastructure</strong> for the digital age.</p><h2 id="Hardware-Improvement-Lowering-the-Barrier-to-Entry"><a href="#Hardware-Improvement-Lowering-the-Barrier-to-Entry" class="headerlink" title="Hardware Improvement: Lowering the Barrier to Entry"></a>Hardware Improvement: Lowering the Barrier to Entry</h2><p>Running parallel to the open source revolution is the relentless improvement in hardware capabilities. The increasing power and affordability of CPUs, memory, and storage significantly reduced the technical prerequisites for building software.</p><p>In earlier eras, developers needed to understand low-level system behavior to write performant code. Today, however, high-level abstractions and frameworks, supported by powerful hardware, allow developers to write functional applications even if the underlying code is inefficient. This shift has opened the door to many more participants in the industry.</p><p>Especially in China, this hardware-fueled democratization played a key role. Without needing deep system-level knowledge, a large population of new developers could quickly become productive, contributing to the countryâ€™s rapid software industry expansion.</p><h2 id="The-Winner-Take-All-Effect-of-Open-Source"><a href="#The-Winner-Take-All-Effect-of-Open-Source" class="headerlink" title="The Winner-Take-All Effect of Open Source"></a>The Winner-Take-All Effect of Open Source</h2><p>Despite the decentralizing ethos of open source, it has also led to <strong>a new kind of monopolization</strong>. In many domains â€” databases, web servers, orchestration, machine learning frameworks â€” a single open source project becomes the de facto standard.</p><p>Once a high-quality solution is widely adopted, it eliminates the need for alternatives. Network effects kick in. Tooling, talent, and documentation all concentrate around the dominant choice. While this avoids wasteful duplication and drives consistency, it also <strong>limits diversity</strong> and stifles alternative experimentation.</p><p>This standardization creates a paradox: open source makes software more accessible, yet at the same time <strong>centralizes power</strong> in a handful of dominant ecosystems and contributors.</p><h2 id="Labor-Market-Consequences-Infrastructure-Work-Disappears"><a href="#Labor-Market-Consequences-Infrastructure-Work-Disappears" class="headerlink" title="Labor Market Consequences: Infrastructure Work Disappears"></a>Labor Market Consequences: Infrastructure Work Disappears</h2><p>One of the least-discussed side effects of this consolidation is its impact on the labor market. When open source infrastructure becomes ubiquitous, the demand for engineers to build and maintain alternative systems disappears. What once required dedicated teams inside every company is now outsourced to a few core maintainers or cloud service providers.</p><p>As a result, <strong>infrastructure engineering jobs shrink</strong>, and developers are pushed <strong>up the stack</strong> toward application development. While this shift enables faster product delivery, it also narrows the career paths available to engineers and concentrates specialized knowledge in fewer hands.</p><h2 id="Management-The-Missing-Link-in-Information-Sharing"><a href="#Management-The-Missing-Link-in-Information-Sharing" class="headerlink" title="Management: The Missing Link in Information Sharing"></a>Management: The Missing Link in Information Sharing</h2><p>Software development was successfully democratized through open source â€” anyone with internet access could learn from and build upon public code. Hardware, by contrast, was democratized through physical delivery: end users received powerful tools, but not the knowledge of how they were made. <strong>Management</strong>, however, experienced neither. It remained locked in practice, largely undocumented and deeply dependent on tacit experience. This lack of transparent, transferable knowledge made it far harder for organizations to improve their leadership structures by simply observing or replicating successful models elsewhere.</p><p>This gap is particularly visible in the Chinese tech industry. While the technical side advanced rapidly, management practices lagged behind. The result: widespread inefficiencies, poor planning, and toxic work cultures like <strong>996</strong> (working from 9 a.m. to 9 p.m., six days a week).</p><p>Many workers in China have openly criticized the <strong>waste of labor hours</strong> and lack of respect for personal time â€” signs that while the tools of production advanced, the organizational systems managing those tools did not evolve at the same pace.</p><h2 id="A-Complex-Transformation"><a href="#A-Complex-Transformation" class="headerlink" title="A Complex Transformation"></a>A Complex Transformation</h2><p>The software industryâ€™s transformation over the past few decades has been dramatic, global, and uneven. Open source and hardware improvements made software development more inclusive and faster-moving. But this same transformation led to consolidation of tools, loss of infrastructure engineering roles, and exposed deep cultural gaps in leadership and management.</p><p>Weâ€™re left with a layered reality:</p><ul><li>Open source enabled learning and growth, but also centralization.</li><li>Hardware progress reduced the need for deep CS expertise, but made inefficiency tolerable.</li><li>Management remains a bottleneck in many regions, especially where organizational culture hasnâ€™t caught up with technical capability.</li></ul><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>The evolution of the software industry is a story of <strong>information freedom</strong> and <strong>structural tradeoffs</strong>. Open source and hardware democratized access and supercharged global development, but they also introduced new dependencies, shifted labor dynamics, and revealed the limits of what information alone can solve.</p><p>As we prepare for the next phase â€” AI-driven development, decentralized systems, or sovereign tech stacks â€” we must recognize that <strong>not all parts of the stack evolve equally</strong>. Tools may be global, but management is still deeply local. And understanding that tension will be key to building sustainable and humane systems in the decades to come.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;The software industry has undergone explosive growth over the past few decades, with two key forces behind its rapid transformation: the 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Kernel journey with bpftrace</title>
    <link href="http://dlee-libo.github.io/2020/05/31/bpftrace-kernel-journey/"/>
    <id>http://dlee-libo.github.io/2020/05/31/bpftrace-kernel-journey/</id>
    <published>2020-05-31T07:55:19.000Z</published>
    <updated>2025-06-13T09:17:24.720Z</updated>
    
    <content type="html"><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å‰å‡ å¤©åŒäº‹å’Œæˆ‘èŠèµ· calico çš„ä¸€äº›å®ç°åŸç†ï¼Œä»–ç»™äº†æˆ‘ä¸€ä¸ªè„šæœ¬è®©æˆ‘è¯•ç©ä¸€ä¸‹å¦‚ä½•é€šè¿‡ linux ä¸‹çš„ veth è®¾å¤‡ä½¿å¾—åœ¨å•ç‹¬çš„ network namespace å¯ä»¥ä¸ host è¿›è¡Œé€šä¿¡ã€‚æ„å¤–çš„æ˜¯ï¼Œåœ¨æˆ‘çš„ç¬”è®°æœ¬ä¸Šæ•´ä¸ªæ–¹æ¡ˆæ²¡æœ‰æ­£ç¡®åœ°å·¥ä½œã€‚ç”±äºç¼ºä¹ç›¸å…³çš„æ–‡æ¡£æ”¯æŒï¼Œæ‰€ä»¥æˆ‘é€šè¿‡ä½¿ç”¨ bpftrace é…åˆé˜…è¯»å†…æ ¸çš„æºç ï¼Œç»ˆäºææ˜ç™½äº†æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Œå€Ÿæ­¤æœºä¼šè®°å½•ä¸‹æ¥å±•ç¤ºä¸‹ bpftrace åŠä¸€äº›ç›¸å…³å·¥å…·çš„åŸºæœ¬ç”¨æ³•ã€‚</p><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>é€šè¿‡æ‰§è¡Œä¸‹é¢çš„è„šæœ¬ï¼Œæˆ‘ä»¬å°†ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ network namepsaceï¼š <code>ns0</code> ï¼Œä»¥åŠä¸€å¯¹ veth è®¾å¤‡ <code>v-ns0</code> å’Œ <code>v-ns0-peer</code>ã€‚æˆ‘ä»¬å°† <code>v-ns0</code> æ”¾å…¥ <code>ns0</code> ä¸­ï¼Œå°† <code>v-ns0-peer</code> ç•™åœ¨ host ä¸­ï¼Œé€šè¿‡å¼€å¯ <code>v-ns0-peer</code> çš„ proxy_arp åŠŸèƒ½æˆ‘ä»¬åº”å½“èƒ½çœ‹åˆ° <code>v-ns0-peer</code> è®¾å¤‡ä¼šç”¨è‡ªå·±çš„ MAC åœ°å€å“åº” <code>v-ns0</code> è®¾å¤‡å‘å‡ºçš„ ARP è¯·æ±‚ã€‚å¦‚æœè¿›ä¸€æ­¥è®¾ç½®ç›¸å…³çš„è½¬å‘å’Œè·¯ç”±è§„åˆ™ <code>ns0</code> ä¸­çš„è¿›ç¨‹å°†å¯ä»¥é¡ºç•…åœ°ä¸å…¶ä»–æœºå™¨ä¸Šçš„å®¹å™¨è¿›è¡Œé€šä¿¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">NS=ns0</span><br><span class="line">VETH=v-<span class="variable">$NS</span></span><br><span class="line"></span><br><span class="line">ip netns add <span class="variable">$NS</span></span><br><span class="line"></span><br><span class="line">ip link add <span class="variable">$VETH</span> <span class="built_in">type</span> veth peer name <span class="variable">$VETH</span>-peer</span><br><span class="line"></span><br><span class="line">ip link <span class="built_in">set</span> <span class="variable">$VETH</span>-peer up</span><br><span class="line">ip link <span class="built_in">set</span> <span class="variable">$VETH</span> netns <span class="variable">$NS</span></span><br><span class="line">ip netns <span class="built_in">exec</span> <span class="variable">$NS</span> ip link <span class="built_in">set</span> <span class="variable">$VETH</span> up</span><br><span class="line"></span><br><span class="line">ip netns <span class="built_in">exec</span> <span class="variable">$NS</span> ip addr add 10.6.0.1/32 dev <span class="variable">$VETH</span></span><br><span class="line">ip netns <span class="built_in">exec</span> <span class="variable">$NS</span> ip route add 169.254.0.1 dev <span class="variable">$VETH</span> scope link</span><br><span class="line">ip netns <span class="built_in">exec</span> <span class="variable">$NS</span> ip route add default via 169.254.0.1 dev <span class="variable">$VETH</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/conf/<span class="variable">$VETH</span>-peer/proxy_arp</span><br><span class="line"><span class="built_in">echo</span> 0 &gt; /proc/sys/net/ipv4/conf/<span class="variable">$VETH</span>-peer/rp_filter</span><br></pre></td></tr></table></figure><p>æˆ‘é¢ä¸´çš„ä¸»è¦é—®é¢˜æ˜¯åœ¨æˆ‘çš„ç¬”è®°æœ¬ä¸Šæ‰§è¡Œå®Œä¸Šé¢çš„è„šæœ¬åï¼Œ <code>v-ns0-peer</code> è®¾å¤‡çš„ proxy_arp åŠŸèƒ½å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œé€šè¿‡ä½¿ç”¨ wireshark åœ¨ <code>v-ns0-peer</code> ä¸ŠæŠ“åŒ…åŒæ—¶æ‰§è¡Œ <code>ip netns exec ns0 ping 192.168.1.1</code> ï¼Œå¯ä»¥æ˜æ˜¾çœ‹åˆ°åªæœ‰å¯¹äº <code>ns0</code> ä¸­çš„é»˜è®¤ç½‘å…³ 169.254.0.1 çš„ ARP è¯·æ±‚å´æ²¡æœ‰ä»»ä½•çš„ ARP åº”ç­”ã€‚<br><img src="/images/no-arp-reply.png" alt="no arp reply"></p><h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p>è®¾å¤‡ <code>v-ns0-peer</code> çš„ proxy_arp åŠŸèƒ½æ²¡æœ‰æ­£ç¡®å·¥ä½œï¼Œæˆ‘ä¸€å¼€å§‹çš„æ¨æµ‹æ˜¯éœ€è¦å¼€å¯æŸäº›è®¾ç½®ï¼Œå¯èƒ½æ˜¯å®‰å…¨ç­–ç•¥ç›¸å…³çš„ã€‚æ‰€ä»¥ä¸€å¼€å§‹åœ¨ google ä¸Šæ‰¾äº†ä¸€åœˆèµ„æ–™ï¼Œä½†æ˜¯æ²¡æœ‰å‘ç°ä»€ä¹ˆç‰¹åˆ«æœ‰å¸®åŠ©çš„ï¼Œäºæ˜¯è€ƒè™‘è·Ÿè¸ªä¸‹å†…æ ¸çš„ä»£ç ï¼Œçœ‹çœ‹æ˜¯ä»€ä¹ˆæ¡ä»¶æ²¡æœ‰ç¬¦åˆã€‚ç›´æ¥é˜…è¯»å†…æ ¸ä»£ç çš„æ–¹å¼æ¥åˆ†æéš¾åº¦æ¯”è¾ƒå¤§ï¼Œå› æ­¤æˆ‘é€‰æ‹©ä¸€è¾¹é˜…è¯»ä¸€è¾¹ä½¿ç”¨ trace å·¥å…·å¿«é€Ÿç¡®å®šå†…æ ¸çš„æ‰§è¡Œè·¯å¾„ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨çš„å·¥å…·æ˜¯ <a href="https://github.com/iovisor/bpftrace" target="_blank" rel="noopener">bpftrace</a> ã€‚</p><h3 id="å·¥å…·å‡†å¤‡"><a href="#å·¥å…·å‡†å¤‡" class="headerlink" title="å·¥å…·å‡†å¤‡"></a>å·¥å…·å‡†å¤‡</h3><p>æˆ‘çš„ç¬”è®°æœ¬æ˜¯ ubuntu 20.04 çš„æ“ä½œç³»ç»Ÿï¼Œå…¶ä»–æ“ä½œç³»ç»Ÿä¸‹å·¥å…·çš„å®‰è£…å’Œå‡†å¤‡åº”è¯¥æ˜¯ç±»ä¼¼çš„ã€‚</p><ol><li>è·å–å½“å‰å†…æ ¸çš„æºä»£ç ã€‚æ‰§è¡Œ <code>apt-get source linux-image-unsigned-$(uname -r)</code> å³å¯ã€‚</li><li>è·å–å½“å‰å†…æ ¸çš„ debug info ã€‚æ·»åŠ æº ddebs.ubuntu.com åæ‰§è¡Œ <code>apt-get install linux-image-$(uname -r)-dbgsym</code> å³å¯ã€‚</li><li>å®‰è£… bpftrace ä»¥åŠ <a href="https://github.com/iovisor/bcc" target="_blank" rel="noopener">bcc</a> ã€‚æ‰§è¡Œ <code>apt-get install bpftrace bpfcc-tools linux-headers-$(uname -r)</code> å³å¯ã€‚</li></ol><h3 id="å®šä½å†…æ ¸ä»£ç "><a href="#å®šä½å†…æ ¸ä»£ç " class="headerlink" title="å®šä½å†…æ ¸ä»£ç "></a>å®šä½å†…æ ¸ä»£ç </h3><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾å‡º proxy_arp åŠŸèƒ½ä¸ºä»€ä¹ˆä¸å·¥ä½œï¼Œå¤„ç† ARP è¯·æ±‚çš„ä»£ç åœ¨ net/ipv4/arp.c ä¸­çš„ <code>arp_process</code> å‡½æ•°ä¸­ã€‚é€šè¿‡å¤§è‡´é˜…è¯»è¯¥å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿…é€Ÿå‘ç°ä¸ proxy_arp ç›¸å…³çš„ä»£ç æ®µåº”è¯¥å¦‚ä¸‹ 813 è¡Œé™„è¿‘ã€‚<br><img src="/images/code-813.png" alt="code-813"></p><h3 id="trace-å†…æ ¸"><a href="#trace-å†…æ ¸" class="headerlink" title="trace å†…æ ¸"></a>trace å†…æ ¸</h3><p>æˆ‘ä»¬çš„ ARP è¯·æ±‚åœ¨è®¾å¤‡ <code>v-ns0-peer</code> ä¸Šè¢«æ”¶åˆ°ä»¥åå†…æ ¸æ‰§è¡Œåˆ° 813 è¡Œï¼Œæ£€æŸ¥ arp-&gt;ar_op è‚¯å®šæ˜¯ ARPOP_REQUEST ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€éœ€è¦ç¡®å®šå‡½æ•° <code>ip_route_input_noref</code> çš„è¿”å›å€¼ã€‚æˆ‘ä»¬ä½¿ç”¨ bpftrace æ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼Œé€šè¿‡æ‰§è¡Œ <code>bpftrace -e &#39;kretprobe:ip_route_input_noref { printf(&quot;pid %d. ret: %d\n&quot;, pid, retval); }&#39;</code> æˆ‘ä»¬å¯ä»¥å¾—åˆ° <code>ip_route_input_noref</code> æ¯æ¬¡è°ƒç”¨çš„è¿”å›å€¼ã€‚</p><p>å¼€å§‹ trace ä»¥åï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åœ¨ <code>ns0</code> ä¸­æ‰§è¡Œä»»ä½•æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå·²ç»èƒ½çœ‹åˆ°ä¸€äº›è¾“å‡ºäº†ï¼š<br><img src="/images/trace1.png" alt="trace1"><br>è¿™ä¸ªæ˜¾ç„¶æ˜¯æœºå™¨ä¸Šå¤„ç†å…¶ä»–çš„ ARP è¯·æ±‚çš„æ—¶å€™æ‰§è¡Œçš„ï¼Œä¸ºäº†æ’é™¤è¿™äº›å¹²æ‰°ï¼Œæˆ‘å°†ç¬”è®°æœ¬çš„ç½‘ç»œæ–­å¼€äº†ï¼Œå†é‡æ–°å¼€å§‹ trace ï¼Œå¹¶æ‰§è¡Œ <code>ip netns exec ns0 ping 192.168.1.1</code> æ¥è§¦å‘ ARP è¯·æ±‚ã€‚<br><img src="/images/trace2.png" alt="trace2"><br>å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šè¾“å‡ºï¼Œæœ‰çš„ PID æ˜¯ ping ï¼Œæœ‰çš„ PID æ˜¯ 0 ï¼Œæ‰€æœ‰çš„è¿”å›å€¼éƒ½æ˜¯ 0ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‚¯å®šä»£ç è‚¯å®šè¿›å…¥äº†816è¡Œï¼Œæ¥ä¸‹æ¥æ˜¯ä¸¤ä¸ªåˆ†æ”¯ï¼Œ819è¡Œå’Œ836è¡Œã€‚å› ä¸ºå‡½æ•° <code>skb_rtable</code> è¢«å†…è”äº†ï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨ bpftrace å» trace è¯¥å‡½æ•°ã€‚ä¸ºäº†ç¡®è®¤ä»£ç çš„æ‰§è¡Œè·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ bpftrace çš„ kprobe æ”¯æŒ function offset è¿™ä¸ªç‰¹ç‚¹æ¥æ‰“ç‚¹ã€‚</p><h4 id="åæ±‡ç¼–å†…æ ¸"><a href="#åæ±‡ç¼–å†…æ ¸" class="headerlink" title="åæ±‡ç¼–å†…æ ¸"></a>åæ±‡ç¼–å†…æ ¸</h4><p>ä¸ºäº†çŸ¥é“819å’Œ837ä¸¤ä¸ªåˆ†æ”¯çš„ä»£ç ç›¸å¯¹äºå‡½æ•° <code>arp_process</code> çš„åç§»ï¼Œæˆ‘ä»¬ä½¿ç”¨ gdb åæ±‡ç¼– <code>gdb -q /usr/lib/debug/boot/vmlinux-$(uname -r) --ex &#39;disassemble arp_process&#39;</code> ï¼Œç„¶åè¿…é€Ÿæ»šåŠ¨åˆ°æœ‰å‡½æ•° <code>ip_route_input_noref</code> çš„è°ƒç”¨çš„é™„è¿‘ï¼š<br><img src="/images/disasm.png" alt="disassemble"><br>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•° <code>ip_route_input_noref</code> çš„è°ƒç”¨åœ¨ +1173 çš„ä½ç½®ï¼Œæ¥ä¸‹æ¥ +1191 åˆ¤æ–­å…¶è¿”å›å€¼æ˜¯å¦ä¸º0ï¼Œä¸ä¸º0å°±è·³è½¬åˆ° arp_process+289 çš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ addr2line æ¥ç¡®è®¤ä¸‹å¯¹åº”çš„æ˜¯ä»£ç ä¸­çš„ä»€ä¹ˆä½ç½®ã€‚æ‰§è¡Œ <code>addr2line -e /usr/lib/debug/boot/vmlinux-$(uname-r) 0xffffffff819ed861</code> å¾—åˆ°ç»“æœ linux-5.4.0/include/net/neighbour.h:516 ã€‚é˜…è¯»ä»£ç å‘ç°æ˜¯å‡½æ•° <code>__neigh_lookup</code> çš„å®ç°ï¼Œè¯¥å‡½æ•°å…¶å®æ˜¯åœ¨ 865 è¡Œè°ƒç”¨çš„ï¼Œè¢«å†…è”äº†ã€‚</p><p>å› ä¸ºæˆ‘ä»¬ä¸Šé¢ trace çŸ¥é“ <code>ip_route_input_noref</code> è¿”å›æ˜¯0ï¼Œæ‰€ä»¥ä»£ç æ‰§è¡Œåº”è¯¥æ˜¯è¿›å…¥äº†816è¡Œï¼Œä¹Ÿå°±æ˜¯é¡ºç€ +1197 ç»§ç»­æ‰§è¡Œã€‚+1197 ä»å†…å­˜è¯»å–ä¸€ä¸ªå€¼å°†ä½ä½æŠ¹æ‰ä½œä¸ºåœ°å€å»åŠ è½½ä¸€ä¸ªå€¼ï¼Œé€šè¿‡è¯»ä»£ç æˆ‘ä»¬çŸ¥é“æ˜¯å‡½æ•° <code>skb_rtable</code> çš„å†…å®¹ï¼Œæ¥ç€+1210çš„åˆ¤æ–­å…¶å®å°±æ˜¯æˆ‘ä»¬çš„819è¡Œçš„åˆ¤æ–­ï¼Œè¯»ä»£ç å¯ä»¥çŸ¥é“ <code>RTN_LOCAL</code> çš„å€¼æ˜¯ 2 ï¼Œ<code>RTN_UNICAST</code> çš„å€¼æ˜¯ 1 ã€‚ä¸ºäº†ç¡®å®šä»£ç æ˜¯å¦è¿›å…¥äº†820è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨+1219åŸ‹ç‚¹ï¼Œå¯æƒœçš„æ˜¯æˆ‘çš„ç¬”è®°æœ¬ä¸Šå®‰è£…çš„ bpftrace åœ¨ç¼–è¯‘çš„æ—¶å€™æ²¡æœ‰å¼€å¯ <code>ALLOW_UNSAFE_PROBE</code> æ‰€ä»¥å½“æˆ‘åœ¨ç¬”è®°æœ¬ä¸Šæ‰§è¡Œ <code>bpftrace -e &#39;kprobe:arp_process+1219 { printf(&quot;executed\n&quot;); } &#39;</code> çš„æ—¶å€™æŠ¥é”™ï¼š<br><img src="/images/unsafe.png" alt="unsafe-error"></p><h4 id="æ‰‹å·¥ä½¿ç”¨-bcc"><a href="#æ‰‹å·¥ä½¿ç”¨-bcc" class="headerlink" title="æ‰‹å·¥ä½¿ç”¨ bcc"></a>æ‰‹å·¥ä½¿ç”¨ bcc</h4><p>bpftrace ä¸æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ bcc ç›´æ¥å†™ç¨‹åºæ¥ trace å†…æ ¸ï¼Œä»£ç éå¸¸ç®€å•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> bcc <span class="keyword">import</span> BPF</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> strftime</span><br><span class="line"></span><br><span class="line"><span class="comment"># load BPF program</span></span><br><span class="line">bpf_text = <span class="string">"""</span></span><br><span class="line"><span class="string">#include &lt;uapi/linux/ptrace.h&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">int print_called(struct pt_regs *ctx) &#123;</span></span><br><span class="line"><span class="string">    bpf_trace_printk("executed!\\n");</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return 0;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">b = BPF(text=bpf_text)</span><br><span class="line">b.attach_kprobe(event=<span class="string">'arp_process'</span>, event_off=<span class="number">1219</span>, fn_name=<span class="string">'print_called'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># header</span></span><br><span class="line">print(<span class="string">'%-9s %-6s %s'</span> % (<span class="string">'TIME'</span>, <span class="string">'PID'</span>, <span class="string">'MSG'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># format output</span></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        (task, pid, cpu, flags, ts, msg) = b.trace_fields()</span><br><span class="line">    <span class="keyword">except</span> ValueError:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    print(<span class="string">'%-9s %-6d %s'</span> % (strftime(<span class="string">'%H:%M:%S'</span>), pid, msg))</span><br></pre></td></tr></table></figure><p>è¿è¡Œèµ·æ¥æˆ‘ä»¬çš„ bcc ç¨‹åºï¼Œæ‰§è¡Œ ping ï¼Œç„¶åæˆ‘ä»¬å‘ç°ï¼Œ+1219 æ˜¯æœ‰æ‰§è¡Œåˆ°çš„ï¼Œé‚£ä¹ˆè¯´æ˜ <code>addr_type</code> çš„å€¼ä¸æ˜¯ <code>RTN_LOCAL</code> ã€‚æ‰€ä»¥ä»£ç å°†ä¼šæ‰§è¡Œåˆ°836è¡Œçš„åˆ¤æ–­ <code>IN_DEV_FORWARD(in_dev)</code> ï¼Œç›´æ¥çœ‹æ±‡ç¼–ä»£ç ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹å‡ºå…³é”®æ˜¯çœ‹+1229çš„ <code>je</code> æŒ‡ä»¤ï¼Œå¦‚æœå‘ç”Ÿè·³è½¬å°±è¯´æ˜æ²¡æœ‰è¿›å…¥837è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬ç»§ç»­ trace +1235 å³å¯çŸ¥é“ï¼Œæ‰§è¡Œ ping ï¼Œæˆ‘ä»¬å‘ç° +1235 æ²¡æœ‰æ‰§è¡Œåˆ°ï¼è¯´æ˜ <code>IN_DEV_FORWARD(in_dev)</code> çš„åˆ¤æ–­æ²¡æˆåŠŸï¼Œæˆ‘ä»¬è¿›å…¥ä»£ç åº“æœç´¢å‘ç°è¿™æ˜¯ä¸€ä¸ªå®ï¼Œä¸»è¦å¹²çš„äº‹æ˜¯æ£€æŸ¥è®¾å¤‡çš„ forwarding é€‰é¡¹æ˜¯å¦å¼€å¯ã€‚æˆ‘ä»¬æ‰§è¡Œ <code>cat /proc/sys/net/ipv4/conf/v-ns0-peer/forwarding</code> å¯ä»¥çœ‹åˆ°ç»“æœæ˜¯0ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶ä¿®æ”¹ä¸º1åç»§ç»­ trace ã€‚ç°åœ¨ä»£ç é¡ºåˆ©æ‰§è¡Œåˆ°äº† +1235 ï¼Œä½†æ˜¯æŠ“åŒ…ä¾ç„¶æ²¡æœ‰çœ‹åˆ° ARP åº”ç­”ã€‚</p><p>æˆ‘ä»¬ç»§ç»­çœ‹æ±‡ç¼–ï¼Œ+1235 å’Œ +1238 çš„åˆ¤æ–­å¯¹åº”ä»£ç ä¸­837è¡Œçš„ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œæµ‹è¯• <code>addr_type</code> æ˜¯å¦æ˜¯ <code>RTN_UNICAST</code> ï¼Œæˆ‘ä»¬ç»§ç»­ trace +1244 æ¥éªŒè¯ä¸‹è¿™ä¸ªæ¡ä»¶åˆ¤æ–­æ˜¯å¦æˆåŠŸã€‚æ‰§è¡Œ ping ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ªåˆ¤æ–­å¤±è´¥äº†ï¼Œæ‰€ä»¥ä»£ç æ‰§è¡Œè·³åˆ°äº†åé¢ï¼Œäºæ˜¯ proxy_arp æ²¡æœ‰æ­£ç¡®å·¥ä½œã€‚</p><p>ç¨å¾®é˜…è¯»ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ <code>addr_type</code> æ˜¯ä½¿ç”¨æˆ‘ä»¬ ARP è¯·æ±‚é‡Œé¢çš„ç›®çš„ IP åœ°å€æŸ¥è·¯ç”±è¡¨åå¾—åˆ°çš„è®¯æ¯ï¼Œè¿™é‡Œçš„é€»è¾‘åªæ˜¯è¦ç¡®ä¿æˆ‘ä»¬çš„ IP åœ°å€æ˜¯å•æ’­åœ°å€ã€‚è€Œæˆ‘ä»¬æŸ¥è®¯çš„åœ°å€ 169.254.0.1 æ˜¯ link-local åœ°å€ï¼Œè‚¯å®šæ˜¯å•æ’­åœ°å€ï¼Œå› æ­¤è¿™ä¸ªè¡Œä¸ºå°±æ¯”è¾ƒå¥‡æ€ªäº†ã€‚è¿›ä¸€æ­¥æ€è€ƒï¼Œç»“åˆ wikipedia ä¸­å¯¹ proxy_arp çš„ä¸€æ®µæè¿°ï¼š</p><blockquote><p>The proxy is aware of the location of the trafficâ€™s destination, and offers its own MAC address as the (ostensibly final) destination.</p></blockquote><p>æˆ‘çŒœæµ‹æ˜¯å› ä¸ºæ–­ç½‘çŠ¶æ€ä¸‹æˆ‘çš„ç¬”è®°æœ¬ä¸çŸ¥é“å¦‚ä½•åˆ°è¾¾ 169.254.0.1 ï¼Œæ‰§è¡Œ <code>ip route get 169.254.0.1</code> æŠ¥é”™ï¼šRTNETLINK answers: Network is unreachable ã€‚æ‰“å¼€ç¬”è®°æœ¬ç½‘ç»œç»§ç»­æµ‹è¯•ï¼Œé¦–å…ˆ <code>ip route get 169.254.0.1</code> æ­£ç¡®è¿”å›äº†ï¼Œç„¶åæˆ‘ä»¬é€€å›å»æœ€å¼€å§‹å» trace <code>ip_route_input_noref</code> ï¼Œä¸ºäº†è®©å¹²æ‰°å°½é‡å°‘ï¼Œæˆ‘å…³é—­äº†ç¬”è®°æœ¬ä¸Šå¤§éƒ¨åˆ†ç¨‹åºã€‚å¼€å¯ trace åæ‰§è¡Œ ping ç»“æœå‘ç° <code>ip_route_input_noref</code> å±…ç„¶è¿”å›äº†é0å€¼ï¼š-18 ã€‚</p><h4 id="æ·±å…¥-ip-route-input-noref"><a href="#æ·±å…¥-ip-route-input-noref" class="headerlink" title="æ·±å…¥ ip_route_input_noref"></a>æ·±å…¥ <code>ip_route_input_noref</code></h4><p>é˜…è¯»å†…æ ¸ä»£ç ï¼Œ<code>ip_route_input_noref</code> çš„å®ç°åœ¨ net/ipv4/route.c ä¸­ï¼Œä¸€ä¸ªç®€åŒ–çš„è°ƒç”¨é“¾è·¯æ˜¯ <code>ip_route_input_noref</code> -&gt; <code>ip_route_input_rcu</code> -&gt; <code>ip_route_input_slow</code> ã€‚å…¶ä¸­å‡½æ•° <code>ip_route_input_slow</code> æ¯”è¾ƒå¤æ‚ï¼Œè€Œæˆ‘ä»¬çš„ç›®çš„åªæ˜¯ç®€å•æ‰¾åˆ°è¿”å› -18 çš„åŸå› ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è·Ÿè¸ªäº§ç”Ÿè¿”å›å€¼çš„åœ°æ–¹ï¼Œé™¤å¼€å¤§éƒ¨åˆ†å¸¸å€¼ä¸ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›å¤–ï¼Œç¬¬ä¸€ä¸ªå¯èƒ½äº§ç”Ÿ -18 çš„åœ°æ–¹æ˜¯å¯¹äºå‡½æ•° <code>fib_validate_source</code> çš„è°ƒç”¨ã€‚æ‰§è¡Œå‘½ä»¤ <code>bpftrace -e &#39;kretprobe:fib_validate_source { printf(&quot;pid %d. ret: %d\n&quot;, pid, retval); }&#39;</code> å¹¶å¼€å§‹ ping ï¼Œæˆ‘ä»¬éå¸¸å¹¸è¿ï¼Œæœç„¶è¿™ä¸ªå‡½æ•°è¿”å›äº† -18 ï¼</p><h4 id="è¿½éš-fib-validate-source"><a href="#è¿½éš-fib-validate-source" class="headerlink" title="è¿½éš fib_validate_source"></a>è¿½éš <code>fib_validate_source</code></h4><p>å‡½æ•° <code>fib_validate_source</code> çš„å®ç°åœ¨ net/ipv4/fib_frontend.c é‡Œé¢ï¼Œä»£ç å¾ˆçŸ­ï¼Œå¯èƒ½äº§ç”Ÿ -18 çš„è¿”å›å€¼çš„åœ°æ–¹æ˜¯å‡½æ•° <code>__fib_validate_source</code> ï¼Œè¿›å…¥å‡½æ•° <code>__fib_validate_source</code> æŸ¥çœ‹ï¼Œå¾ˆæ˜¾çœ¼çœ‹åˆ°æœ«å°¾çš„ <code>return -EXDEV</code> ï¼Œç®€å•ç”¨ä¸ª C ç¨‹åºéªŒè¯å°±å‘ç° errno EXDEV æ­£å¥½æ˜¯ 18ï¼é˜…è¯»ä»£ç å‘ç°å¯¼è‡´è¿”å› EXDEV çš„åŸå› æ˜¯å‚æ•° rpf é0ï¼Œè€Œè¯¥å‚æ•°æ˜¯ä¸Šå±‚å‡½æ•° <code>fib_validate_source</code> ä¼ è¿›æ¥çš„ï¼Œå€¼æ˜¯è¿™æ ·å¾—åˆ°çš„ï¼š<code>int r = secpath_exists(skb) ? 0 : IN_DEV_RPFILTER(idev);</code> ã€‚æ‰€ä»¥è¯´æ˜æ˜¯ <code>secpath_exists(skb)</code> è¿”å›äº†0ï¼Œç„¶å <code>IN_DEV_RPFILTER</code> è¿”å›äº†é0å€¼ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸€å¼€å§‹çš„è„šæœ¬é‡Œé¢æ˜æ˜æ˜¯æœ‰è¿™æ ·ä¸€å¥çš„ <code>echo 0 &gt; /proc/sys/net/ipv4/conf/$VETH-peer/rp_filter</code> ï¼Œæ‰€ä»¥è¿™é‡Œå°±æ¯”è¾ƒå¥‡æ€ªäº†ã€‚</p><p>åˆ°è¿™é‡Œæˆ‘ä»¬çŸ¥é“äº†æ–¹å‘ä½†æ˜¯ä¾ç„¶ä¸çŸ¥é“æœ€ç»ˆçš„åŸå› æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬ç»§ç»­çœ‹çœ‹ <code>IN_DEV_RPFILTER</code> çš„å®ç°æœ‰ä»€ä¹ˆå¥‡æ€ªçš„åœ°æ–¹ã€‚åœ¨ include/linux/inetdevice.h ä¸­æˆ‘ä»¬æ‰¾åˆ°äº†è¿™ä¸ªå®çš„å®šä¹‰ä¸ºï¼š <code>#define IN_DEV_RPFILTER(in_dev)        IN_DEV_MAXCONF((in_dev), RP_FILTER)</code> ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ <code>IN_DEV_MAXCONF</code> çš„å®šä¹‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IN_DEV_MAXCONF(in_dev, attr) \</span></span><br><span class="line">(<span class="built_in">max</span>(IPV4_DEVCONF_ALL(dev_net(in_dev-&gt;dev), attr), \</span><br><span class="line">     IN_DEV_CONF_GET((in_dev), attr)))</span><br></pre></td></tr></table></figure><p>å•Šå“ˆï¼åŸæ¥è¿™ä¸ªæ˜¯å–å…¨å±€çš„å€¼å’Œè®¾å¤‡çš„å€¼ä¸­çš„è¾ƒå¤§è€…ã€‚æ‰§è¡Œ <code>cat /proc/sys/net/ipv4/conf/all/rp_filter</code> å‘ç°è¯¥å€¼ä¸º 2ï¼Œå°†å…¶ä¿®æ”¹ä¸º0åå†è¿›è¡Œæµ‹è¯•ï¼Œ ARP åº”ç­”æ­£ç¡®å‡ºç°ï¼<br><img src="/images/arp-reply.png" alt="arp reply"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;å‰å‡ å¤©åŒäº‹å’Œæˆ‘èŠèµ· calico çš„ä¸€äº›å®ç°åŸç†ï¼Œä»–ç»™äº†æˆ‘ä¸€ä¸ªè„šæœ¬è®©æˆ‘è¯•ç©ä¸€ä¸‹å¦‚ä½•é€šè¿‡ linux ä¸‹çš„ veth è®¾å¤‡ä½¿å¾—åœ¨å•ç‹¬çš„ net
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>UNIX process UID model</title>
    <link href="http://dlee-libo.github.io/2019/05/13/UNIX-process-UID-model/"/>
    <id>http://dlee-libo.github.io/2019/05/13/UNIX-process-UID-model/</id>
    <published>2019-05-13T06:53:41.000Z</published>
    <updated>2025-06-13T09:17:24.720Z</updated>
    
    <content type="html"><![CDATA[<p>In UNIX environment, each process has three user id: real user id, effective user id, saved set-user-id. How these three UID are set is depended on whether the setuid bit of executable file has been set. The table bellow shows how these three UID will change after a <code>exec</code> system call.</p><table><thead><tr><th align="left">setuid bit</th><th align="left">real user id</th><th align="left">effective user id</th><th align="left">saved set-user-id</th></tr></thead><tbody><tr><td align="left">set</td><td align="left">unchanged</td><td align="left">the owner of executable file</td><td align="left">copy from effective user id</td></tr><tr><td align="left">unset</td><td align="left">unchanged</td><td align="left">unchanged</td><td align="left">copy from effective user id</td></tr></tbody></table><p>Here is a demo, I first compile a simple program into <code>a.out</code>, then use <code>chown root:root a.out</code> to change the ower of the executable file, after that I use <code>chmod +s a.out</code> to set setuid bit. The output of <code>ls -l a.out</code> is: <code>-rwsrwsr-x 1 root root 14600 Apr 24 08:02 a.out</code>. After start <code>a.out</code>, the output of <code>ps -o pid,ppid,euid,ruid,suid,cmd -p 16990,17210</code> is:</p><table><thead><tr><th align="left">PID</th><th align="left">PPID</th><th align="left">EUID</th><th align="left">RUID</th><th align="left">SUID</th><th align="left">CMD</th></tr></thead><tbody><tr><td align="left">16990</td><td align="left">16989</td><td align="left">1001</td><td align="left">1001</td><td align="left">1001</td><td align="left">-bash</td></tr><tr><td align="left">17210</td><td align="left">16990</td><td align="left">0</td><td align="left">1001</td><td align="left">0</td><td align="left">./a.out</td></tr></tbody></table><p>We can notice that EUID of <code>a.out</code> is root, RUID keeps same as its parent process, SUID is same as EUID.</p><hr><p>Permission check is based on effective user id. UNIX system provides these system calls to manipulate these three UID: <a href="http://man7.org/linux/man-pages/man2/setuid.2.html" target="_blank" rel="noopener">setuid</a>, <a href="http://man7.org/linux/man-pages/man2/seteuid.2.html" target="_blank" rel="noopener">seteuid</a>. How these system call affect three UID is based on whether the process has root privilege.</p><table><thead><tr><th align="left">system call</th><th align="left">ID</th><th align="left">root privilege</th><th align="left">non root privilege</th></tr></thead><tbody><tr><td align="left"><code>setuid(uid)</code></td><td align="left">real user id</td><td align="left">set to uid</td><td align="left">unchanged</td></tr><tr><td align="left"><code>setuid(uid)</code></td><td align="left">effective user id</td><td align="left">set to uid</td><td align="left">set to uid. uid must equal to ruid or suid, else return error</td></tr><tr><td align="left"><code>setuid(uid)</code></td><td align="left">saved set-user-id</td><td align="left">set to uid</td><td align="left">unchanged</td></tr></tbody></table><table><thead><tr><th align="left">system call</th><th align="left">ID</th><th align="left">root privilege</th><th align="left">non root privilege</th></tr></thead><tbody><tr><td align="left"><code>seteuid(uid)</code></td><td align="left">real user id</td><td align="left">unchanged</td><td align="left">unchanged</td></tr><tr><td align="left"><code>seteuid(uid)</code></td><td align="left">effective user id</td><td align="left">set to uid</td><td align="left">set to uid. uid must equal to ruid or suid, else return error</td></tr><tr><td align="left"><code>seteuid(uid)</code></td><td align="left">saved set-user-id</td><td align="left">unchanged</td><td align="left">unchanged</td></tr></tbody></table><p>One use case of this model is a program we all familiar with: <code>sudo</code>, <code>ll /usr/bin/sudo</code>: <code>-rwsr-xr-x 1 root root 149080 Jan 18  2018 /usr/bin/sudo</code>.<br>We can see that <code>sudo</code> has setuid bit setted. What happened after we type <code>sudo some-command</code>. The shell will start <code>sudo</code> with <code>some-command</code> as its arguments. As <code>sudo</code> has setuid bit set, so <code>sudo</code> will have ruid set to normal user, euid and suid set to root. Then <code>sudo</code> call <code>setuid(0)</code> change all three UID to root, after that <code>sudo</code> will <code>fork</code> and <code>exec</code> our command, so our command will be executed as all three UID set to root. This is just a brief process, permission check and ask password stuff all ignored.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;In UNIX environment, each process has three user id: real user id, effective user id, saved set-user-id. How these three UID are set is d
      
    
    </summary>
    
    
      <category term="UNIX" scheme="http://dlee-libo.github.io/tags/UNIX/"/>
    
  </entry>
  
  <entry>
    <title>Go dependency management introduction</title>
    <link href="http://dlee-libo.github.io/2019/03/14/Go-dependency-management-introduction/"/>
    <id>http://dlee-libo.github.io/2019/03/14/Go-dependency-management-introduction/</id>
    <published>2019-03-14T03:24:27.000Z</published>
    <updated>2025-06-13T09:17:24.720Z</updated>
    
    <content type="html"><![CDATA[<p>As far as I know, we usually have three ways to manage dependencies for a Go project.</p><ol><li>Manage manually.</li><li>Use <a href="https://golang.github.io/dep/" target="_blank" rel="noopener">dep</a></li><li>Use <a href="https://github.com/golang/go/wiki/Modules" target="_blank" rel="noopener">Go module</a></li></ol><h2 id="Manually-management"><a href="#Manually-management" class="headerlink" title="Manually management"></a>Manually management</h2><p>To manage dependencies manually, we add all our external dependencies into <code>vendor</code> folder, then add <code>vendor</code> folder into version control system. Thatâ€™s all!</p><h2 id="Dep"><a href="#Dep" class="headerlink" title="Dep"></a>Dep</h2><p>The typical usage of dep is that, we write our code first, and then issue <code>dep ensure</code> to scan our code to find out external dependencies. Then dep can download those dependencies and store them inside our projectâ€™s <code>vendor</code> folder. Dep will maintain a <code>Gopkg.lock</code> file to store version information. As programmer we donâ€™t edit <code>Gopkg.lock</code> directly, we edit a file named <code>Gopkg.toml</code> to specify rules which will guide dep to generate <code>Gopkg.lock</code>. By using dep, we usually no need to add the <code>vendor</code> folder into version control system, instead we manage <code>Gopkg.lock</code> and <code>Gopkg.toml</code>.</p><h2 id="Go-module"><a href="#Go-module" class="headerlink" title="Go module"></a>Go module</h2><p>By using dep or managing manually, we need to put our project properly inside <code>$GOPATH/src</code> if our project contains more than one packages. Thatâ€™s very unpleasant for some people. So we can use <a href="https://github.com/golang/go/wiki/Modules" target="_blank" rel="noopener">Go module</a> . For a project using Go module, we should have two files: <code>go.mod</code>, <code>go.sum</code> which should be generated via <code>go mod init</code> for a new project.<br>Inside <code>go.mod</code> we can specify our moduleâ€™s identity which will be used as a mapping to <code>$GOPATH/src</code>. For example, one of my project has <code>module github.com/dlee/admin</code>, then once I invoke <code>env GO111MODULE=on go build</code> the go tool will treat my project root path as <code>$GOPATH/src/github.com/dlee/admin</code>. Then I can import packages defined inside my project properly. e.g. <code>import &quot;github.com/dlee/admin/pkg1&quot;</code> will cause go build tool search pkg1 from my project folder not <code>$GOPATH/src/github.com/dlee/admin/pkg1</code>.</p><p>During daily developing, we use <code>env GO111MODULE=on go get</code> to download/add dependencies or upgrade dependencies, this will trigger updating the <code>go.mod</code> file. Or if needed we can directly edit <code>go.mod</code>. So basically if we clone a Go module enabled project, we can use <code>go mod download</code> to download dependencies, and then we can build the project. To upgrade a dependency, we use <code>env GO111MODULE=on go get foo@version</code> to upgrade to a specific version or <code>env GO111MODULE=on go get foo</code> to upgrade to latest version. Once upgrade, the <code>go.mod</code> and <code>go.sum</code> will be updated automatically.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;As far as I know, we usually have three ways to manage dependencies for a Go project.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Manage manually.&lt;/li&gt;
&lt;li&gt;Use &lt;a href=
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Derive Turing fixed point with Python explained</title>
    <link href="http://dlee-libo.github.io/2018/12/11/derive-turing-fixed-point/"/>
    <id>http://dlee-libo.github.io/2018/12/11/derive-turing-fixed-point/</id>
    <published>2018-12-11T01:27:44.000Z</published>
    <updated>2025-06-13T09:17:24.720Z</updated>
    
    <content type="html"><![CDATA[<p>In lambda calculus, all functions are anonymous, so we can not define a recursive function in usual way, e.g. call function itself by name inside functionâ€™s body.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># we can not do this invoke self thing</span></span><br><span class="line"><span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &lt; <span class="number">2</span> <span class="keyword">else</span> x * invoke_self(x - <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>To tackle this issue, we can assume we already have one function <code>f</code> which can calculate factorial of <code>x</code>. Then we use this helper function <code>f</code> to implement our factorial function.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># we use currying here rather than write lambda f, x:</span></span><br><span class="line"><span class="keyword">lambda</span> f: <span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &lt; <span class="number">2</span> <span class="keyword">else</span> x * f(x - <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>To use this function, we need to pass two arguments, one is the helper function <code>f</code>, the other is the number we need to calculate its factorial.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">F = <span class="keyword">lambda</span> f: <span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &lt; <span class="number">2</span> <span class="keyword">else</span> x * f(x - <span class="number">1</span>)</span><br><span class="line">F(f)(<span class="number">5</span>) == <span class="number">120</span></span><br></pre></td></tr></table></figure><p>By now, we get a function <code>F1 = F(f)</code>, and with this <code>F1</code>, we can calculate factorial of any number. Then we get to know one thing: actually, <code>F1</code> is our helper function <code>f</code>!<br>Letâ€™s look closer, <code>F1 = F(f)</code> and <code>F1 is f</code> so <code>F1 = F(F1)</code>. If we know fixed point concept in mathematics, then weâ€™ll find out that <code>F1</code> is a fixed point of <code>F</code>.<br>If we have one function <code>T</code>, for any given <code>F</code>: <code>T(F) == F(T(F))</code>, e.g. <code>T(F)</code> is a fixed point of <code>F</code>. Then we can easily write recursive functions, for our factorial example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">factorial = T(<span class="keyword">lambda</span> f: <span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &lt; <span class="number">2</span> <span class="keyword">else</span> x * f(x - <span class="number">1</span>))</span><br></pre></td></tr></table></figure><p>OK, letâ€™s figure out the definition of <code>T</code>. Wait, we already <em>have</em> the definition of <code>T</code>: <code>T(F) == F(T(F))</code>. Except that this definition is a recursive definition. But we are good at eliminating recursion.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># T = lambda y: y(T(y))</span></span><br><span class="line"><span class="comment"># we define T1 which accept two arguments, first one is T1 itself</span></span><br><span class="line">T1 = <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: y(x(x)(y))</span><br><span class="line"><span class="comment"># to get T, we just apply T1 to T1</span></span><br><span class="line">T = T1(T1)</span><br><span class="line"><span class="comment"># in conclusion</span></span><br><span class="line">T = (<span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: y(x(x)(y)))(<span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: y(x(x)(y)))</span><br></pre></td></tr></table></figure><p>This <code>T</code> is the Turing fixed-point combinator. But if we test it in Python, we will get <code>RuntimeError: maximum recursion depth exceeded</code>. This is because Python use strict evaluation strategy, so when we call <code>T(F)</code>, it try to evaluate arguments immediately, then endless evaluation occur. To work around this, we donâ€™t return value directly in <code>T1</code>, we return the function:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">T1 = <span class="keyword">lambda</span> x: <span class="keyword">lambda</span> y: <span class="keyword">lambda</span> z : y(x(x)(y))(z)</span><br><span class="line">T = T1(T1)</span><br><span class="line"><span class="keyword">print</span> T(<span class="keyword">lambda</span> f: <span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &lt; <span class="number">2</span> <span class="keyword">else</span> x * f(x - <span class="number">1</span>))(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;In lambda calculus, all functions are anonymous, so we can not define a recursive function in usual way, e.g. call function itself by nam
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ç¼–è¾‘è·ç¦»è§£æ³•åŠè¯æ˜</title>
    <link href="http://dlee-libo.github.io/2018/06/13/edit-distance/"/>
    <id>http://dlee-libo.github.io/2018/06/13/edit-distance/</id>
    <published>2018-06-13T10:17:42.000Z</published>
    <updated>2025-06-13T09:17:24.720Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜ä»‹ç»"><a href="#é—®é¢˜ä»‹ç»" class="headerlink" title="é—®é¢˜ä»‹ç»"></a>é—®é¢˜ä»‹ç»</h2><p>ç»™å®šå­—ç¬¦ä¸² w1 ï¼Œ w2 ï¼Œ ä»¥åŠå¦‚ä¸‹å¯¹å­—ç¬¦ä¸²çš„æ“ä½œï¼š</p><ul><li>åˆ é™¤å­—ç¬¦ä¸²ä¸­æŒ‡å®šä½ç½®çš„å­—ç¬¦</li><li>åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥æŒ‡å®šå­—ç¬¦</li><li>å°†å­—ç¬¦ä¸²ä¸­æŒ‡å®šå­—ç¬¦æ›¿æ¢ä¸ºå¦å¤–çš„å­—ç¬¦</li></ul><p>ä½¿ç”¨ä¸Šè¿°æ“ä½œå°† w1 å˜ä¸º w2 æ‰€éœ€è¦çš„æœ€å°‘æ“ä½œæ¬¡æ•°å³ä¸º w1 ä¸ w2 çš„ç¼–è¾‘è·ç¦»</p><a id="more"></a><h2 id="è§£æ³•ä»‹ç»"><a href="#è§£æ³•ä»‹ç»" class="headerlink" title="è§£æ³•ä»‹ç»"></a>è§£æ³•ä»‹ç»</h2><p>ç¼–è¾‘è·ç¦»æ˜¯ä¸€é“ç»å…¸çš„åŠ¨æ€è§„åˆ’çš„é¢˜ç›®ï¼Œå®šä¹‰ <code>f(i, j)</code> ä¸º <code>w1[0, i]</code> =&gt; <code>w2[0, j]</code> çš„ç¼–è¾‘è·ç¦»ï¼Œåˆ™æœ‰çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">f(i, j) = f(i - <span class="number">1</span>, j - <span class="number">1</span>) <span class="keyword">if</span> w1[i] == w2[j] <span class="keyword">else</span> min(f(i - <span class="number">1</span>, j), f(i - <span class="number">1</span>, j - <span class="number">1</span>), f(i, j - <span class="number">1</span>)) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">f(<span class="number">0</span>, <span class="number">0</span>) = <span class="number">0</span> <span class="keyword">if</span> w1[<span class="number">0</span>] == w2[<span class="number">0</span>] <span class="keyword">else</span> <span class="number">1</span></span><br><span class="line">f(<span class="number">0</span>, j) = j <span class="keyword">if</span> w1[<span class="number">0</span>] == w2[j] <span class="keyword">else</span> f(<span class="number">0</span>, j - <span class="number">1</span>) + <span class="number">1</span></span><br><span class="line">f(i, <span class="number">0</span>) = i <span class="keyword">if</span> w1[i] == w2[<span class="number">0</span>] <span class="keyword">else</span> f(i - <span class="number">1</span>, <span class="number">0</span>) + <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="è¯æ˜"><a href="#è¯æ˜" class="headerlink" title="è¯æ˜"></a>è¯æ˜</h2><p>å½“ <code>w1[i] == w2[j]</code> æ—¶ï¼Œ æ˜¾ç„¶æœ‰ <code>f(i, j) = f(i - 1, j - 1)</code> ã€‚ å½“ <code>w1[i] != w2[j]</code> æ—¶ï¼Œ ä¸å¦¨å°†ä¸¤ä¸ªå•è¯åˆ†åˆ«è®°ä¸ºï¼š<code>w1 a</code> ä¸ <code>w2 b</code> ã€‚<br>å‡è®¾ <code>w1 a</code> =&gt; <code>w2 b</code> æœ€å°‘éœ€è¦ x ä¸ªæ­¥éª¤ï¼Œ <code>w1 a</code> =&gt; <code>w2</code> æœ€å°‘éœ€è¦ y1 ä¸ªæ­¥éª¤ï¼Œ <code>w1</code> =&gt; <code>w2</code> æœ€å°‘éœ€è¦ y2 ä¸ªæ­¥éª¤ï¼Œ <code>w1</code> =&gt; <code>w2 b</code> æœ€å°‘éœ€è¦ y3 ä¸ªæ­¥éª¤ã€‚<br>åˆ™æœ‰æ¨è®ºï¼šy1 + 1 &gt;= x; y2 + 1 &gt;= x; y3 + 1 &gt;= x ï¼Œä½¿ç”¨åè¯æ³•å³å¯è¯æ˜ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯æ˜ï¼š x == min(y1 + 1, y2 + 1, y3 + 1)</p><p>é¦–å…ˆæˆ‘ä»¬å®¹æ˜“è¯æ˜æ‰€æœ‰çš„æ“ä½œåºåˆ—éƒ½å¯ä»¥ç»Ÿä¸€è°ƒæ•´é¡ºåºä¸ºå…ˆè¿›è¡Œåˆ é™¤æ“ä½œ(è®°ä¸º d æ“ä½œ)ï¼Œç„¶åè¿›è¡Œæ’å…¥æ“ä½œ(è®°ä¸º i æ“ä½œ)ï¼Œæœ€åè¿›è¡Œæ›¿æ¢æ“ä½œ(è®°ä¸º r æ“ä½œ)ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥æŠŠåŒç±»æ“ä½œè¿›è¡Œè°ƒæ•´é¡ºåºä½¿å¾—æ“ä½œä»å‰å¾€åè¿›è¡Œã€‚è¿™æ ·çš„è°ƒæ•´æ“ä½œé¡ºåºä¸ä¼šå¯¼è‡´æ“ä½œçš„æ•°é‡å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬è®¨è®ºã€‚</p><p>è€ƒå¯Ÿ <code>w1 a</code> =&gt; <code>w2 b</code> æ‰€æœ‰å¯èƒ½çš„æ“ä½œåºåˆ—çš„ç»„åˆ:</p><p>å¦‚æœ <code>w1 a</code> =&gt; <code>w2 b</code> å…¨éƒ¨æ˜¯ d æ“ä½œï¼Œé‚£ä¹ˆæœ€åä¸€æ­¥ä¸€å®šæ˜¯ d last a ï¼Œå³ <code>w1 a</code> =&gt; <code>w2 b a</code> =&gt; <code>w2 b</code> ï¼Œé‚£ä¹ˆå°±æœ‰ x - 1 ä¸ªæ­¥éª¤ä¸€å®šèƒ½æŠŠ <code>w1</code> å˜æˆ <code>w2 b</code><br>æ‰€ä»¥æœ‰ x - 1 &gt;= y3 &amp;&amp; x &gt;= y3 + 1 ï¼Œäºæ˜¯æœ‰ x == y3 + 1</p><p>å¦‚æœ <code>w1 a</code> =&gt; <code>w2 b</code> å…¨éƒ¨æ˜¯ i æ“ä½œï¼Œé‚£ä¹ˆæœ€åä¸€æ­¥ä¸€å®šæ˜¯ i last b ï¼Œå³ <code>w1 a</code> =&gt; <code>w2</code> =&gt; <code>w2 b</code> ï¼Œé‚£ä¹ˆå°±æœ‰ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1 a</code> å˜æˆ <code>w2</code><br>æ‰€ä»¥æœ‰ x - 1 &gt;= y1 &amp;&amp; x &gt;= y1 + 1 ï¼Œäºæ˜¯æœ‰ x == y1 + 1</p><p>å¦‚æœ <code>w1 a</code> =&gt; <code>w2 b</code> å…¨éƒ¨æ˜¯ r æ“ä½œï¼Œé‚£ä¹ˆæœ€åä¸€æ­¥ä¸€å®šæ˜¯ r last a to b ï¼Œå³ <code>w1 a</code> =&gt; <code>w2 a</code> =&gt; <code>w2 b</code> ï¼Œé‚£ä¹ˆå°±æœ‰ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1</code> å˜æˆ <code>w2</code><br>æ‰€ä»¥æœ‰ x - 1 &gt;= y2 &amp;&amp; x &gt;= y2 + 1 ï¼Œäºæ˜¯æœ‰ x == y2 + 1</p><p>å¦‚æœ <code>w1 a</code> =&gt; <code>w2 b</code> æ˜¯ d i æ“ä½œï¼Œåˆ†åˆ«è®¨è®ºï¼š</p><ol><li>å¦‚æœ d æ“ä½œæ²¡æœ‰åœ¨ a ä¸Šæ‰§è¡Œè¿‡ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w2</code> =&gt; [i] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1 a</code> =&gt; [åŒæ ·çš„ d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [åŒæ ·çš„ i æ“ä½œ] =&gt; <code>w2</code> ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1 a</code> =&gt; <code>w2</code> ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y1 &amp;&amp; x &lt;= y1 + 1 æ•…è€Œ x == y1 + 1</li><li>å¦‚æœ d æ“ä½œè¿‡ a ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [d] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1</code> =&gt; [åŒæ ·çš„ d æ“ä½œ] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ—çš„ i æ“ä½œ] =&gt; <code>w2 b</code> , æ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥å®ç° <code>w1</code> =&gt; <code>w2 b</code> ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y3 &amp;&amp; x &lt;= y3 + 1 æ•…è€Œ x == y3 + 1</li></ol><p>å¦‚æœ <code>w1 a</code> =&gt; <code>w2 b</code> æ˜¯ d r æ“ä½œ, åˆ†åˆ«è®¨è®ºï¼š</p><ol><li>å¦‚æœ d æ“ä½œæ²¡æœ‰åœ¨ a ä¸Šæ‰§è¡Œï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€äº›åˆ— r æ“ä½œ] =&gt; <code>w2 a</code> =&gt; [r] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2</code> ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1</code> =&gt; <code>w2</code> ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y2 &amp;&amp; x &lt;= y2 + 1 æ•…è€Œ x == y2 + 1</li><li>å¦‚æœ d æ“ä½œè¿‡ a ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [d] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 b</code> ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1</code> =&gt; <code>w2 b</code> ,æ‰€ä»¥æœ‰ x - 1 &gt;= y3 &amp;&amp; x &lt;= y3 + 1 æ•…è€Œ x == y3 + 1</li></ol><p>å¦‚æœ <code>w1 a</code> =&gt; <code>w2 b</code> æ˜¯ i r æ“ä½œï¼Œåˆ†åˆ«è®¨è®ºï¼š</p><ol><li>å¦‚æœ i æ“ä½œæ²¡æœ‰è¶Šè¿‡ a ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 a</code> =&gt; [r] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ—çš„ r æ“ä½œ] =&gt; <code>w2</code> ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1</code> =&gt; <code>w2</code> ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y2 &amp;&amp; x &lt;= y2 + 1 æ•…è€Œ x == y2 + 1</li><li>å¦‚æœ i æ“ä½œè¿‡ a ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ—çš„ i æ“ä½œ] =&gt; <code>w1&#39; a w1&#39;&#39;</code> =&gt; [ i æ“ä½œï¼Œæœ€åçš„ b ] =&gt; <code>w1&#39; a w1&#39;&#39; b</code> =&gt; [ä¸€ç³»åˆ—çš„ r æ“ä½œ]ï¼ˆr æ“ä½œè‚¯å®šä¸ä¼šè¶…è¿‡ <code>w1&#39;a</code> çš„ä½ç½®, å› ä¸ºåé¢çš„å­—ç¬¦éƒ½æ˜¯ i æ“ä½œæ’å…¥çš„æ–°å­—ç¬¦ï¼‰ =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39; a w1&#39;&#39;</code> =&gt; [ä¸€ç³»åˆ—çš„ r æ“ä½œ] =&gt; <code>w2</code>ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1 a</code> =&gt; <code>w2</code> ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y1 &amp;&amp; x &lt;= y1 + 1 æ•…è€Œ x == y1 + 1</li></ol><p>å¦‚æœ <code>w1 a</code> =&gt; <code>w2 b</code> æ˜¯ d i r æ“ä½œï¼Œåˆ†åˆ«è®¨è®ºï¼š</p><ol><li>å¦‚æœ d æ“ä½œæ²¡æœ‰æ“ä½œè¿‡ a ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 b</code> ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“ <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 b</code>ï¼Œç±»æ¯”ä¸Šé¢çš„æ–¹æ³•ï¼Œåˆ†å¼€è®¨è®ºï¼š<ul><li>å¦‚æœ i æ“ä½œæ²¡æœ‰è¶…è¿‡ a ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39;&#39; a</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 a</code> =&gt; [r] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39;&#39;</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2</code> ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1</code> =&gt; <code>w2</code> ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y2 &amp;&amp; x &lt;= y2 + 1 æ•…è€Œ x == y2 + 1</li><li>å¦‚æœ i æ“ä½œè¶…è¿‡ a , é‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39;&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39;&#39; a w1&#39;&#39;&#39;</code> =&gt; [i æ“ä½œï¼Œæœ€åçš„ b ] =&gt; <code>w1&#39;&#39; a w1&#39;&#39;&#39; b</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39;&#39; a</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; <code>w1&#39;&#39; a w1&#39;&#39;&#39;</code> =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2</code>ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1 a</code> =&gt; <code>w2</code>  ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y1 &amp;&amp; x &lt;= y1 + 1 æ•…è€Œ x == y1 + 1</li></ul></li><li>å¦‚æœ d æ“ä½œæ“ä½œè¿‡ a ï¼Œé‚£ä¹ˆå°±æ˜¯ <code>w1 a</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39; a</code> =&gt; [d] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 b</code><br>æˆ‘ä»¬æ„é€  <code>w1</code> =&gt; [ä¸€ç³»åˆ— d æ“ä½œ] =&gt; <code>w1&#39;</code> =&gt; [ä¸€ç³»åˆ— i æ“ä½œ] =&gt; [ä¸€ç³»åˆ— r æ“ä½œ] =&gt; <code>w2 b</code> ï¼Œæ‰€ä»¥ x - 1 ä¸ªæ­¥éª¤å¯ä»¥æŠŠ <code>w1</code> =&gt; <code>w2 b</code> ï¼Œæ‰€ä»¥æœ‰ x - 1 &gt;= y3 &amp;&amp; x &lt;= y3 + 1 æ•…è€Œ x == y3 + 1</li></ol><p>é€šè¿‡æšä¸¾æ‰€æœ‰çš„æ“ä½œåºåˆ—ç»„åˆï¼Œå¾—åˆ°ç»“è®ºï¼š x çš„å–å€¼ä¸€å®šæ˜¯ y1 + 1 ï¼Œ y2 + 1 ï¼Œ y3 + 1 ä¸­çš„ä¸€ä¸ªï¼Œæ‰€ä»¥æ ¹æ®å®šä¹‰æœ‰ï¼š x == min(y1 + 1, y2 + 1, y3 + 1)</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;é—®é¢˜ä»‹ç»&quot;&gt;&lt;a href=&quot;#é—®é¢˜ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜ä»‹ç»&quot;&gt;&lt;/a&gt;é—®é¢˜ä»‹ç»&lt;/h2&gt;&lt;p&gt;ç»™å®šå­—ç¬¦ä¸² w1 ï¼Œ w2 ï¼Œ ä»¥åŠå¦‚ä¸‹å¯¹å­—ç¬¦ä¸²çš„æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ é™¤å­—ç¬¦ä¸²ä¸­æŒ‡å®šä½ç½®çš„å­—ç¬¦&lt;/li&gt;
&lt;li&gt;åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥æŒ‡å®šå­—ç¬¦&lt;/li&gt;
&lt;li&gt;å°†å­—ç¬¦ä¸²ä¸­æŒ‡å®šå­—ç¬¦æ›¿æ¢ä¸ºå¦å¤–çš„å­—ç¬¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨ä¸Šè¿°æ“ä½œå°† w1 å˜ä¸º w2 æ‰€éœ€è¦çš„æœ€å°‘æ“ä½œæ¬¡æ•°å³ä¸º w1 ä¸ w2 çš„ç¼–è¾‘è·ç¦»&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
